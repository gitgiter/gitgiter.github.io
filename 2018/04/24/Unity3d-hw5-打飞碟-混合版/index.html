<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/logo_miccall.png"/>
	<link rel="shortcut icon" href="/img/logo_miccall.png">
	
			    <title>
    gitgiter's blog
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    <meta name="keywords" content="miccall" />
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	 
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>
    <style type="text/css">
        body:before {
          content: ' ';
          position: fixed;
          top: 0;
          background: url('/img/bg.jpg') center 0 no-repeat;
          right: 0;
          bottom: 0;
          left: 0;
          background-size: cover; 
        }
    </style>

			    
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script async type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
</head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_okaidia.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">gitgiter</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="简历">
		                简历
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="团队">
		                团队
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="标签">
		                标签
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
                    
                    <li>
                        <a title="github" href="https://github.com/gitgiter" target="_blank" rel="noopener">
                            <i class="icon fa fa-github"></i>
                        </a>
                    </li>
                    
                    <li>
                        <a title="500px" href="https://blog.csdn.net/Wonderful_sky" target="_blank" rel="noopener">
                            <i class="icon fa fa-500px"></i>
                        </a>
                    </li>
                    
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(https://img-blog.csdn.net/20180424225051335?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvbmRlcmZ1bF9za3k=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >Unity3d-hw5-打飞碟(混合版)</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h1 id="打飞碟——基础版和物理版结合"><a href="#打飞碟——基础版和物理版结合" class="headerlink" title="打飞碟——基础版和物理版结合"></a>打飞碟——基础版和物理版结合</h1><h2 id="游戏简介"><a href="#游戏简介" class="headerlink" title="游戏简介"></a>游戏简介</h2><p>打飞碟游戏是一款敏捷类游戏（也可能是我手残），我将游戏规则制定如下：</p>
<ul>
<li>游戏总共3回合，以飞碟颜色区分</li>
<li>每个回合难度会增加，主要体现在飞碟速度和大小</li>
<li>每关分数独立计算，第一关1个飞碟1分，第2关2分，第三关3分</li>
<li>一个飞碟都不能掉才能进入下个回合（手动滑稽）<h2 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h2></li>
</ul>
<ol>
<li>MVC模式<br>MVC模式在之前的有关牧师与魔鬼的博客中有详细解释过，这里沿用的是牧师与魔鬼的MVC框架，在此基础上做了一些改动，如果有兴趣可以到我的相关博客查看，这次主要解释下面两个模式。</li>
<li>工厂模式</li>
</ol>
<ul>
<li>为什么需要工厂模式<br>游戏对象的创建与销毁成本较高，所以当游戏涉及大量游戏对象的创建与销毁时，必须考虑减少销毁次数，比如这次的打飞碟游戏，或者像其他类型的射击游戏，其中子弹或者中弹对象的创建与销毁是很频繁的。</li>
<li>工厂模式的定义<br>工厂模式是我们最常用的实例化对象模式了，是用工厂方法代替new操作的一种模式。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。</li>
<li>工厂模式的结构<br>游戏对象的创建与销毁，分别对应工厂里面的两个List，这两个List分别存放正在使用的游戏对象，已失效的游戏对象。同时保存两个List的目的是，减少游戏对象的创建与销毁的性能开销。如果已失效的List里面还有item，而这时工厂又需要完成一个新的“订单”，便可以从这些回收的item中拿出来再加工（一些逻辑处理），再返回给用户（调用方）。  </li>
<li>工厂模式的优缺点<ul>
<li>优点 <ul>
<li>一个调用者想创建一个对象，只要知道其名称就可以了。 - 扩展性高，如果想增加一个产品，只要扩展一个工厂类就可以。 </li>
<li>屏蔽产品的具体实现，调用者只关心产品的接口。</li>
<li>例子，如果一个客户需要一辆汽车，可以直接从工厂里面提货，而不用去管这辆汽车是怎么做出来的，以及这个汽车里面的具体实现。</li>
</ul>
</li>
<li>缺点<ul>
<li>一开始实现会比较复杂，需要用心设计一下工厂的结构</li>
<li>每增加一个产品，可能都需要对工厂进行一次较大的“整改”</li>
<li>如果工厂太大，实时保存的所有游戏对象的开销可能要大于游戏对象直接创建与销毁</li>
</ul>
</li>
</ul>
</li>
<li>工厂模式的意义（以本次代码为例）<br>体现了面向对象设计的核心——抽象、包装、隐藏。道具工厂通过场景单实例，构建了可以被方便获取的disk类。包装了复杂的disk生产和回收逻辑，易于使用。包装了disk的产生规则，有利于应对未来游戏规则的变化，易于维护。</li>
</ul>
<ol start="3">
<li>适配器模式</li>
</ol>
<ul>
<li>为什么需要适配器模式<br>就像只有一个usb接口的电脑上想要插多个usb外设，就需要通过一个usb适配器来对这些接口进行扩展。在本游戏实例中，由于我们想要继续沿用上次的基础版ActionManager，并且新增一个管理物理运动的PhysicsActionManager，这时在FirstControl里就需要同时有两个变量分别指向这两个动作管理器了。而这样会造成FirstControl需要管理多个功能相同或类似的组件，如果未来还想加多几个动作管理器，就会显得越来越臃肿，可扩展性很差。所以我们希望FirstControl里只保留一个可扩展的变量，那就是适配器！</li>
<li>适配器模式的定义<br>在计算机编程中，适配器模式（有时候也称包装样式或者包装）将一个类的接口适配成用户所期待的。一个适配允许通常因为接口不兼容而不能在一起工作的类工作在一起，做法是将类自己的接口包裹在一个已存在的类中。</li>
<li>适配器模式的结构<ul>
<li>Target：目标抽象类（USB接口）</li>
<li>Adapter：适配器类（USB扩展器）</li>
<li>Adaptee：适配者类（鼠标、键盘、U盘）</li>
<li>Client：客户类（平板电脑）</li>
</ul>
</li>
<li>适配器模式的优缺点<ul>
<li>优点<ul>
<li>可以让任何两个没有关联的类一起运行。 </li>
<li>提高了类的复用。 </li>
<li>增加了类的透明度。 </li>
<li>灵活性好。</li>
</ul>
</li>
<li>缺点  <ul>
<li>过多地使用适配器，会让系统非常零乱，不易整体进行把握。</li>
<li>容易误导程序员或用户，比如，明明看到调用的是 A 接口，其实内部被适配成了 B 接口的实现。 </li>
</ul>
</li>
</ul>
</li>
<li>适配器模式的意义<br>适配器的主要作用，就是将多个类接入同一个接口，或者转接“不兼容”接口。有动机地修改一个正常运行的系统的接口，将一个类的接口转换成客户希望的另外一个接口。适配器模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。</li>
</ul>
<h2 id="实现效果"><a href="#实现效果" class="headerlink" title="实现效果"></a>实现效果</h2><ul>
<li>Round1<br><img src="/2018/04/24/Unity3d-hw5-打飞碟-混合版/round1.jpg" alt=""></li>
<li>Round2<br><img src="/2018/04/24/Unity3d-hw5-打飞碟-混合版/round2.jpg" alt=""></li>
<li>Round3<br><img src="/2018/04/24/Unity3d-hw5-打飞碟-混合版/round3.jpg" alt=""></li>
</ul>
<h2 id="重要代码实现"><a href="#重要代码实现" class="headerlink" title="重要代码实现"></a>重要代码实现</h2><ul>
<li>文件框架结构<br><img src="/2018/04/24/Unity3d-hw5-打飞碟-混合版/file.jpg" alt=""></li>
<li>脚本挂载情况<br><img src="/2018/04/24/Unity3d-hw5-打飞碟-混合版/script.jpg" alt=""></li>
<li><p>ActionManager，基础动作管理器</p>
<pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ActionManager</span> <span class="token punctuation">:</span> SSActionManager
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> FirstControl sceneController<span class="token punctuation">;</span>
  <span class="token keyword">public</span> DiskFactory diskFactory<span class="token punctuation">;</span>
  <span class="token keyword">public</span> RecordControl scoreRecorder<span class="token punctuation">;</span>
  <span class="token keyword">public</span> Emit EmitDisk<span class="token punctuation">;</span>
  <span class="token keyword">public</span> GameObject Disk<span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// Use this for initialization</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      sceneController <span class="token operator">=</span> <span class="token punctuation">(</span>FirstControl<span class="token punctuation">)</span>Director<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sceneCtrl<span class="token punctuation">;</span>
      diskFactory <span class="token operator">=</span> sceneController<span class="token punctuation">.</span>factory<span class="token punctuation">;</span>
      scoreRecorder <span class="token operator">=</span> sceneController<span class="token punctuation">.</span>scoreRecorder<span class="token punctuation">;</span>
      <span class="token comment" spellcheck="true">//sceneController.MyActionManager = this;</span>
      sceneController<span class="token punctuation">.</span>myAdapter<span class="token punctuation">.</span><span class="token function">SetNormalAM</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//修改的地方</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// Update is called once per frame</span>
  <span class="token keyword">protected</span> <span class="token keyword">new</span> <span class="token class-name">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">playDisk</span><span class="token punctuation">(</span><span class="token keyword">int</span> round<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">//Debug.Log(diskFactory);</span>
      EmitDisk <span class="token operator">=</span> Emit<span class="token punctuation">.</span><span class="token function">GetSSAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Disk <span class="token operator">=</span> diskFactory<span class="token punctuation">.</span><span class="token function">getDisk</span><span class="token punctuation">(</span>round<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">AddAction</span><span class="token punctuation">(</span>Disk<span class="token punctuation">,</span> EmitDisk<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Disk<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>DiskControl<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>action <span class="token operator">=</span> EmitDisk<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SSActionEvent</span><span class="token punctuation">(</span>SSAction source<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>source<span class="token punctuation">.</span>GameObject<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>DiskControl<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hit<span class="token punctuation">)</span>
          scoreRecorder<span class="token punctuation">.</span><span class="token function">miss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      diskFactory<span class="token punctuation">.</span><span class="token function">freeDisk</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span>GameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
      source<span class="token punctuation">.</span>GameObject<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>DiskControl<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hit <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>PhysicsManager，物理动作管理器</p>
<pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PhysicsActionManager</span> <span class="token punctuation">:</span> SSActionManager
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> FirstControl sceneController<span class="token punctuation">;</span>
  <span class="token keyword">public</span> DiskFactory diskFactory<span class="token punctuation">;</span>
  <span class="token keyword">public</span> RecordControl scoreRecorder<span class="token punctuation">;</span>
  <span class="token keyword">public</span> PhysicsEmit EmitDisk<span class="token punctuation">;</span>
  <span class="token keyword">public</span> GameObject Disk<span class="token punctuation">;</span>
  <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// Use this for initialization</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      sceneController <span class="token operator">=</span> <span class="token punctuation">(</span>FirstControl<span class="token punctuation">)</span>Director<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sceneCtrl<span class="token punctuation">;</span>
      diskFactory <span class="token operator">=</span> sceneController<span class="token punctuation">.</span>factory<span class="token punctuation">;</span>
      scoreRecorder <span class="token operator">=</span> sceneController<span class="token punctuation">.</span>scoreRecorder<span class="token punctuation">;</span>
      <span class="token comment" spellcheck="true">//sceneController.MyActionManager = this;</span>
      sceneController<span class="token punctuation">.</span>myAdapter<span class="token punctuation">.</span><span class="token function">SetPhysicsAM</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//修改的地方</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// Update is called once per frame</span>
  <span class="token keyword">protected</span> <span class="token keyword">new</span> <span class="token class-name">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">playDisk</span><span class="token punctuation">(</span><span class="token keyword">int</span> round<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      EmitDisk <span class="token operator">=</span> PhysicsEmit<span class="token punctuation">.</span><span class="token function">GetSSAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Disk <span class="token operator">=</span> diskFactory<span class="token punctuation">.</span><span class="token function">getDisk</span><span class="token punctuation">(</span>round<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">AddAction</span><span class="token punctuation">(</span>Disk<span class="token punctuation">,</span> EmitDisk<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Disk<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>DiskControl<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>action <span class="token operator">=</span> EmitDisk<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SSActionEvent</span><span class="token punctuation">(</span>SSAction source<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>source<span class="token punctuation">.</span>GameObject<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>DiskControl<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hit<span class="token punctuation">)</span>
          scoreRecorder<span class="token punctuation">.</span><span class="token function">miss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      diskFactory<span class="token punctuation">.</span><span class="token function">freeDisk</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span>GameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
      source<span class="token punctuation">.</span>GameObject<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>DiskControl<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hit <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>ActionManagerAdapter，适配器类，封装多个动作管理器</p>
<pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ActionManagerAdapter</span>
<span class="token punctuation">{</span>
  ActionManager normalAM<span class="token punctuation">;</span>
  PhysicsActionManager PhysicsAM<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">int</span> mode <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 0->normal, 1->physics</span>

  <span class="token keyword">public</span> <span class="token function">ActionManagerAdapter</span><span class="token punctuation">(</span>GameObject main<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      normalAM <span class="token operator">=</span> main<span class="token punctuation">.</span><span class="token generic-method function">AddComponent<span class="token punctuation">&lt;</span>ActionManager<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      PhysicsAM <span class="token operator">=</span> main<span class="token punctuation">.</span><span class="token generic-method function">AddComponent<span class="token punctuation">&lt;</span>PhysicsActionManager<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      mode <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SwitchActionMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      mode <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> mode<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">PlayDisk</span><span class="token punctuation">(</span><span class="token keyword">int</span> round<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
          Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"normalAM"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          normalAM<span class="token punctuation">.</span><span class="token function">playDisk</span><span class="token punctuation">(</span>round<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span>
      <span class="token punctuation">{</span>
          Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"physicsAM"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          PhysicsAM<span class="token punctuation">.</span><span class="token function">playDisk</span><span class="token punctuation">(</span>round<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetNormalAM</span><span class="token punctuation">(</span>ActionManager am<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      normalAM <span class="token operator">=</span> am<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetPhysicsAM</span><span class="token punctuation">(</span>PhysicsActionManager pam<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      PhysicsAM <span class="token operator">=</span> pam<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> ActionManager <span class="token function">GetNormalAM</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token keyword">return</span> normalAM<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> PhysicsActionManager <span class="token function">GetPhysicsAM</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token keyword">return</span> PhysicsAM<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>FirstControl，控制第一个场景的类</p>
<pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstControl</span> <span class="token punctuation">:</span> MonoBehaviour<span class="token punctuation">,</span> ISceneControl<span class="token punctuation">,</span> IUserAction <span class="token punctuation">{</span>

  <span class="token comment" spellcheck="true">//public ActionManager MyActionManager { get; set; }</span>
  <span class="token keyword">public</span> ActionManagerAdapter myAdapter<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 修改的地方</span>
  <span class="token keyword">public</span> DiskFactory factory <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> RecordControl scoreRecorder<span class="token punctuation">;</span>
  <span class="token keyword">public</span> UserGUI user<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">float</span> time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      Director diretor <span class="token operator">=</span> Director<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      diretor<span class="token punctuation">.</span>sceneCtrl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                    
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// Use this for initialization</span>
  <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">FixedUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      time <span class="token operator">+</span><span class="token operator">=</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
      time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">// if round &lt;= 3 and is playing, </span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>round <span class="token operator">&lt;=</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>game <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
          <span class="token function">PlayDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          user<span class="token punctuation">.</span>num<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token function">LoadPrefabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment" spellcheck="true">//MyActionManager = gameObject.AddComponent&lt;ActionManager>() as ActionManager;</span>
      myAdapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActionManagerAdapter</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 修改的地方</span>
      scoreRecorder <span class="token operator">=</span> gameObject<span class="token punctuation">.</span><span class="token generic-method function">AddComponent<span class="token punctuation">&lt;</span>RecordControl<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user <span class="token operator">=</span> gameObject<span class="token punctuation">.</span><span class="token generic-method function">AddComponent<span class="token punctuation">&lt;</span>UserGUI<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user<span class="token punctuation">.</span><span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Hit</span><span class="token punctuation">(</span>DiskControl diskCtrl<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>        
      <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>game <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>            
          Ray ray <span class="token operator">=</span> Camera<span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">ScreenPointToRay</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span>mousePosition<span class="token punctuation">)</span><span class="token punctuation">;</span>
          RaycastHit hit<span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>Physics<span class="token punctuation">.</span><span class="token function">Raycast</span><span class="token punctuation">(</span>ray<span class="token punctuation">,</span> <span class="token keyword">out</span> hit<span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">{</span>
              hit<span class="token punctuation">.</span>collider<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"Hit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              hit<span class="token punctuation">.</span>collider<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>DiskControl<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hit <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
              scoreRecorder<span class="token punctuation">.</span><span class="token keyword">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">else</span>
          <span class="token punctuation">{</span>
              Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"Miss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              scoreRecorder<span class="token punctuation">.</span><span class="token function">miss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">PlayDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">//MyActionManager.playDisk(user.round); </span>
      myAdapter<span class="token punctuation">.</span><span class="token function">PlayDisk</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>round<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 修改的地方</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Restart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      SceneManager<span class="token punctuation">.</span><span class="token function">LoadScene</span><span class="token punctuation">(</span><span class="token string">"scene"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// 切换模式</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SwitchMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"Switch Mode"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      myAdapter<span class="token punctuation">.</span><span class="token function">SwitchActionMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">Check</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>DiskFactory，飞碟工厂，管理飞碟的创建和回收</p>
<pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiskFactory</span> <span class="token punctuation">:</span> MonoBehaviour
<span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> DiskFactory _instance<span class="token punctuation">;</span>
  <span class="token keyword">public</span> FirstControl sceneControler <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  GameObject diskPrefab<span class="token punctuation">;</span>
  <span class="token keyword">public</span> DiskControl diskData<span class="token punctuation">;</span>
  <span class="token keyword">public</span> List<span class="token operator">&lt;</span>GameObject<span class="token operator">></span> used<span class="token punctuation">;</span>
  <span class="token keyword">public</span> List<span class="token operator">&lt;</span>GameObject<span class="token operator">></span> free<span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// Use this for initialization</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> DiskFactory <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token keyword">return</span> _instance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
          _instance <span class="token operator">=</span> Singleton<span class="token operator">&lt;</span>DiskFactory<span class="token operator">></span><span class="token punctuation">.</span>Instance<span class="token punctuation">;</span>
          _instance<span class="token punctuation">.</span>used <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">List</span><span class="token operator">&lt;</span>GameObject<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          _instance<span class="token punctuation">.</span>free <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">List</span><span class="token operator">&lt;</span>GameObject<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          diskPrefab <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>Resources<span class="token punctuation">.</span><span class="token generic-method function">Load<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token string">"Prefabs/disk"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Quaternion<span class="token punctuation">.</span>identity<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"instance: "</span> <span class="token operator">+</span> _instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      sceneControler <span class="token operator">=</span> <span class="token punctuation">(</span>FirstControl<span class="token punctuation">)</span>Director<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sceneCtrl<span class="token punctuation">;</span>
      sceneControler<span class="token punctuation">.</span>factory <span class="token operator">=</span> _instance<span class="token punctuation">;</span>       
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> GameObject <span class="token function">getDisk</span><span class="token punctuation">(</span><span class="token keyword">int</span> round<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>sceneControler<span class="token punctuation">.</span>scoreRecorder<span class="token punctuation">.</span>Score <span class="token operator">>=</span> round <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>sceneControler<span class="token punctuation">.</span>user<span class="token punctuation">.</span>round <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span>
          <span class="token punctuation">{</span>
              sceneControler<span class="token punctuation">.</span>user<span class="token punctuation">.</span>round<span class="token operator">++</span><span class="token punctuation">;</span>
              sceneControler<span class="token punctuation">.</span>user<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
              sceneControler<span class="token punctuation">.</span>scoreRecorder<span class="token punctuation">.</span>Score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">else</span>
          <span class="token punctuation">{</span>
              sceneControler<span class="token punctuation">.</span>user<span class="token punctuation">.</span>game <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span>
      <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>sceneControler<span class="token punctuation">.</span>user<span class="token punctuation">.</span>num <span class="token operator">>=</span> <span class="token number">10</span><span class="token punctuation">)</span>
          <span class="token punctuation">{</span>
              sceneControler<span class="token punctuation">.</span>user<span class="token punctuation">.</span>game <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>            
      <span class="token punctuation">}</span>
      GameObject newDisk<span class="token punctuation">;</span>
      RoundControl diskOfCurrentRound <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoundControl</span><span class="token punctuation">(</span>round<span class="token punctuation">)</span><span class="token punctuation">;</span>        
      <span class="token keyword">if</span> <span class="token punctuation">(</span>free<span class="token punctuation">.</span>Count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// if no free disk, then create a new disk</span>
      <span class="token punctuation">{</span>
          newDisk <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token function">Instantiate</span><span class="token punctuation">(</span>diskPrefab<span class="token punctuation">)</span> <span class="token keyword">as</span> GameObject<span class="token punctuation">;</span>
          newDisk<span class="token punctuation">.</span><span class="token generic-method function">AddComponent<span class="token punctuation">&lt;</span>ClickGUI<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          diskData <span class="token operator">=</span> newDisk<span class="token punctuation">.</span><span class="token generic-method function">AddComponent<span class="token punctuation">&lt;</span>DiskControl<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token comment" spellcheck="true">// else let the first free disk be the newDisk</span>
      <span class="token punctuation">{</span>
          newDisk <span class="token operator">=</span> free<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
          free<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>free<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          newDisk<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"get from free"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      diskData <span class="token operator">=</span> newDisk<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>DiskControl<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      diskData<span class="token punctuation">.</span>color <span class="token operator">=</span> diskOfCurrentRound<span class="token punctuation">.</span>color<span class="token punctuation">;</span>

      newDisk<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localScale <span class="token operator">=</span> diskOfCurrentRound<span class="token punctuation">.</span>scale <span class="token operator">*</span> diskPrefab<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localScale<span class="token punctuation">;</span>
      newDisk<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>material<span class="token punctuation">.</span>color <span class="token operator">=</span> diskData<span class="token punctuation">.</span>color<span class="token punctuation">;</span>

      used<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>newDisk<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> newDisk<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">freeDisk</span><span class="token punctuation">(</span>GameObject disk1<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      used<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>disk1<span class="token punctuation">)</span><span class="token punctuation">;</span>
      disk1<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      free<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>disk1<span class="token punctuation">)</span><span class="token punctuation">;</span>
      Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"free: "</span> <span class="token operator">+</span> free<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Restart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      used<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      free<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>
<hr>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li>以上多数为个人理解，可能有误，仅供参考。</li>
<li>如感兴趣，可访问笔者Gayhub项目地址—<a href="https://github.com/gitgiter/unity3d-learning/tree/master/homework5" target="_blank" rel="noopener">传送门</a></li>
<li>视频演示地址—<a href="https://www.bilibili.com/video/av22528884/" target="_blank" rel="noopener">传送门</a></li>
<li>csdn博客地址—<a href="https://blog.csdn.net/wonderful_sky/article/details/80072194" target="_blank" rel="noopener">传送门</a></li>
</ul>
<hr>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2018/04/24/Unity3d-hw5-打飞碟-混合版/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://yoursite.com/2018/04/24/Unity3d-hw5-打飞碟-混合版/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Written By: <a href="https://github.com/gitgiter" style="border-bottom: none;">gitgiter</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2018总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
